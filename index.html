<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Recipe Box</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --cream: #faf8f4; --ink: #1a1816; --stone: #8c8680;
      --warm: #c8a96e; --light-stone: #e8e4de; --card-bg: #ffffff;
    }
    html { scroll-behavior: smooth; }
    body { font-family: 'DM Sans', sans-serif; background: var(--cream); color: var(--ink); min-height: 100vh; }

    header { padding: 3rem 2rem 2rem; text-align: center; border-bottom: 1px solid var(--light-stone); animation: fadeDown 0.7s ease both; }
    .site-name { font-family: 'Cormorant Garamond', serif; font-size: clamp(2.4rem, 6vw, 4rem); font-weight: 300; letter-spacing: 0.04em; }
    .site-name span { color: var(--warm); font-style: italic; }
    .site-tagline { margin-top: 0.5rem; font-size: 0.8rem; font-weight: 300; letter-spacing: 0.2em; text-transform: uppercase; color: var(--stone); }

    main { max-width: 1100px; margin: 0 auto; padding: 3rem 2rem 5rem; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(310px, 1fr)); gap: 2rem; }

    .card { background: var(--card-bg); border: 1px solid var(--light-stone); cursor: pointer; transition: transform 0.25s ease, box-shadow 0.25s ease; animation: fadeUp 0.6s ease both; }
    .card:nth-child(1) { animation-delay: 0.05s; }
    .card:nth-child(2) { animation-delay: 0.12s; }
    .card:nth-child(3) { animation-delay: 0.19s; }
    .card:nth-child(4) { animation-delay: 0.26s; }
    .card:hover { transform: translateY(-4px); box-shadow: 0 12px 32px rgba(0,0,0,0.08); }

    .card-img-wrap { width: 100%; aspect-ratio: 4/3; overflow: hidden; background: var(--light-stone); }
    .card-img-wrap img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; display: block; }
    .card:hover .card-img-wrap img { transform: scale(1.04); }
    .card-body { padding: 1.25rem 1.5rem 1.5rem; }
    .card-meta { display: flex; gap: 1rem; margin-bottom: 0.6rem; font-size: 0.7rem; letter-spacing: 0.16em; text-transform: uppercase; color: var(--stone); }
    .card-title { font-family: 'Cormorant Garamond', serif; font-size: 1.45rem; font-weight: 400; line-height: 1.25; margin-bottom: 0.5rem; }
    .card-desc { font-size: 0.85rem; color: var(--stone); line-height: 1.6; font-weight: 300; }

    .overlay { position: fixed; inset: 0; background: rgba(26,24,22,0.55); display: flex; align-items: flex-start; justify-content: center; padding: 2rem 1rem; z-index: 100; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; overflow-y: auto; }
    .overlay.active { opacity: 1; pointer-events: all; }
    .modal { background: var(--cream); width: 100%; max-width: 720px; position: relative; transform: translateY(20px); transition: transform 0.35s cubic-bezier(.22,.68,0,1.2); }
    .overlay.active .modal { transform: translateY(0); }
    .modal-img { width: 100%; aspect-ratio: 16/7; object-fit: cover; display: block; background: var(--light-stone); }
    .modal-body { padding: 2rem 2.5rem 3rem; }
    .modal-meta { display: flex; gap: 1.5rem; margin-bottom: 1rem; font-size: 0.7rem; letter-spacing: 0.18em; text-transform: uppercase; color: var(--stone); }
    .modal-title { font-family: 'Cormorant Garamond', serif; font-size: clamp(1.8rem, 4vw, 2.6rem); font-weight: 300; line-height: 1.1; margin-bottom: 0.75rem; }
    .modal-desc { font-size: 0.9rem; color: var(--stone); line-height: 1.7; font-weight: 300; margin-bottom: 2rem; padding-bottom: 2rem; border-bottom: 1px solid var(--light-stone); }

    .section-label { font-size: 0.65rem; letter-spacing: 0.22em; text-transform: uppercase; color: var(--warm); font-weight: 500; margin-bottom: 0.85rem; }
    .ingredients { margin-bottom: 2rem; padding-bottom: 2rem; border-bottom: 1px solid var(--light-stone); }
    .ingredient-item { display: flex; align-items: baseline; gap: 0.75rem; padding: 0.45rem 0; font-size: 0.875rem; line-height: 1.4; }
    .ingredient-item + .ingredient-item { border-top: 1px solid var(--light-stone); }
    .ingredient-amount { font-weight: 500; min-width: 80px; color: var(--stone); font-size: 0.8rem; }

    .phase { margin-bottom: 1.75rem; }
    .phase-heading { font-family: 'Cormorant Garamond', serif; font-size: 1.05rem; font-weight: 500; font-style: italic; color: var(--ink); margin-bottom: 0.75rem; padding-bottom: 0.4rem; border-bottom: 1px solid var(--light-stone); }
    .step { display: grid; grid-template-columns: 2rem 1fr; gap: 0 1rem; margin-bottom: 1rem; align-items: start; }
    .step-num { font-family: 'Cormorant Garamond', serif; font-size: 1.3rem; font-weight: 300; color: var(--warm); line-height: 1.2; }
    .step-text { font-size: 0.9rem; line-height: 1.75; font-weight: 300; padding-top: 0.05rem; }

    .notes-block { margin-top: 2rem; padding: 1.25rem 1.5rem; background: #f5f1ea; border-left: 3px solid var(--warm); }
    .notes-block .section-label { margin-bottom: 0.5rem; }
    .notes-text { font-size: 0.875rem; line-height: 1.7; font-weight: 300; font-style: italic; }

    .close-btn { position: absolute; top: 1rem; right: 1rem; width: 2.25rem; height: 2.25rem; background: rgba(250,248,244,0.9); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background 0.2s; }
    .close-btn:hover { background: var(--cream); }
    .close-btn svg { width: 14px; height: 14px; stroke: var(--ink); }

    footer { text-align: center; padding: 2rem; font-size: 0.75rem; color: var(--stone); letter-spacing: 0.12em; border-top: 1px solid var(--light-stone); }

    .section { margin-bottom: 4rem; }
    .section-header { display: flex; align-items: baseline; gap: 1.5rem; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid var(--light-stone); }
    .section-header h2 { font-family: 'Cormorant Garamond', serif; font-size: clamp(1.6rem, 4vw, 2.4rem); font-weight: 300; letter-spacing: 0.03em; }
    .section-header h2 em { color: var(--warm); font-style: italic; }
    .section-header .section-count { font-size: 0.7rem; letter-spacing: 0.18em; text-transform: uppercase; color: var(--stone); }

    .card-empty { background: transparent; border: 1px dashed var(--light-stone); display: flex; align-items: center; justify-content: center; min-height: 200px; cursor: default; }
    .card-empty:hover { transform: none; box-shadow: none; }
    .card-empty-text { text-align: center; }
    .card-empty-text p { font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; font-weight: 300; font-style: italic; color: var(--light-stone); }
    .card-empty-text span { font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--light-stone); display: block; margin-top: 0.4rem; }

    @keyframes fadeDown { from { opacity: 0; transform: translateY(-14px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeUp   { from { opacity: 0; transform: translateY(18px);  } to { opacity: 1; transform: translateY(0); } }

    @media (max-width: 520px) {
      .modal-body { padding: 1.5rem 1.25rem 2rem; }
      .modal-meta { flex-wrap: wrap; gap: 0.75rem; }
    }
  </style>
</head>
<body>

<header>
  <h1 class="site-name">The Recipe <span>Box</span></h1>
  <p class="site-tagline">Simple cooking, carefully made</p>
</header>

<main>
  <div class="section">
    <div class="section-header">
      <h2>Doughs</h2>
      <span class="section-count" id="doughs-count"></span>
    </div>
    <div class="grid" id="grid-doughs"></div>
  </div>

  <div class="section">
    <div class="section-header">
      <h2><em>Toppings</em></h2>
      <span class="section-count" id="toppings-count"></span>
    </div>
    <div class="grid" id="grid-toppings"></div>
  </div>

  <div class="section">
    <div class="section-header">
      <h2>Beyond <em>Pizza</em></h2>
      <span class="section-count" id="grid-beyond-count"></span>
    </div>
    <div class="grid" id="grid-beyond"></div>
  </div>
</main>

<footer>The Recipe Box &nbsp;&middot;&nbsp; Made with care</footer>

<div class="overlay" id="overlay" role="dialog" aria-modal="true">
  <div class="modal" id="modal">
    <button class="close-btn" id="closeBtn" aria-label="Close">
      <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
    <img class="modal-img" id="modalImg" src="" alt="" />
    <div class="modal-body">
      <div class="modal-meta" id="modalMeta"></div>
      <h2 class="modal-title" id="modalTitle"></h2>
      <p class="modal-desc" id="modalDesc"></p>
      <div class="ingredients">
        <p class="section-label">Ingredients</p>
        <div id="modalIngredients"></div>
      </div>
      <div>
        <p class="section-label">Method</p>
        <div id="modalSteps"></div>
      </div>
      <div id="modalNotes"></div>
    </div>
  </div>
</div>

<script>
var recipes = [{
    section: "beyond",
    title: "Lahmacun",
    description: "Turkish flatbread topped with a spiced minced lamb mixture — earthy, warm and deeply flavoured. Rolled paper-thin and cooked fast in the pizza oven. Serve with a squeeze of lemon and wrap it up like a burrito.",
    category: "Flatbread",
    time: "~30 mins",
    serves: "4 flatbreads",
    image: "images/lachmacun.jpeg",
    ingredients: [
      { amount: "1 portion", name: "pizza dough (use any dough from this site)" },
      { amount: "½",         name: "sweet red pepper, roughly chopped" },
      { amount: "1",         name: "shallot, halved" },
      { amount: "2",         name: "garlic cloves" },
      { amount: "15g",       name: "fresh parsley" },
      { amount: "200g",      name: "ground lamb (or beef)" },
      { amount: "1 tsp",     name: "smoked paprika" },
      { amount: "1 tsp",     name: "ground allspice" },
      { amount: "½ tsp",     name: "ground cumin" },
      { amount: "½ tsp",     name: "Aleppo pepper (or mild chilli flakes)" },
      { amount: "½ tsp",     name: "ground cinnamon" },
      { amount: "½ tsp",     name: "cayenne pepper" },
      { amount: "½ tsp",     name: "salt" },
      { amount: "4 tbsp",    name: "tomato paste" },
      { amount: "2 tbsp",    name: "extra-virgin olive oil" },
      { amount: "to serve",  name: "lemon wedges, red onion, fresh mint, radish" }
    ],
    phases: [
      { heading: "Make the Topping", steps: [
        "In a food processor, pulse together the red pepper, shallot, garlic, and parsley until finely chopped.",
        "Add the ground lamb, all the spices, salt, tomato paste, and olive oil. Pulse 8–10 times until well combined — it should be a smooth, spreadable paste. Don't over-process."
      ]},
      { heading: "Shape and Top", steps: [
        "Divide the dough into 4 equal balls. On a floured surface, roll each one out as thin as possible into a rough disk about 20–22cm (8–9 inches) across.",
        "Spoon 3–4 tablespoons of the meat mixture onto each base and spread it evenly all the way to the edges — very thin, like a smear rather than a layer."
      ]},
      { heading: "Cook in the Pizza Oven", steps: [
        "Preheat the pizza oven to maximum temperature, then turn down to a medium flame before launching.",
        "Launch one lahmacun at a time. It cooks fast — about 2–3 minutes. Turn occasionally. The edges should be crisp and the meat cooked through.",
        "Squeeze lemon juice over immediately. Add sliced red onion, mint, and radish if you like, then roll it up and eat."
      ]}
    ],
    notes: "The meat layer must be very thin or it won't cook through in the oven. Don't skip the lemon at the end — it's essential. Leftovers keep well in the fridge for a day; reheat in the oven until crispy."
  },{
    section: "beyond",
    title: "Flammkuchen with Mushroom",
    description: "A crispy Alsatian flatbread — no yeast, rolled paper-thin, topped with crème fraîche, mushrooms, and onion. Done in under an hour and best eaten straight from the oven.",
    category: "Flatbread",
    time: "~50 mins",
    serves: "6 servings",
    image: "images/flammkuchen.jpeg",
    ingredients: [
      { amount: "250g (2 cups)", name: "all-purpose flour" },
      { amount: "120g (½ cup)", name: "very warm water" },
      { amount: "2 tbsp",       name: "olive oil" },
      { amount: "½ tsp",        name: "fine sea salt" },
      { amount: "150g (½ cup)", name: "crème fraîche" },
      { amount: "200g (7 oz)",  name: "mushrooms, thinly sliced" },
      { amount: "1",            name: "small onion, thinly sliced" },
      { amount: "to taste",     name: "salt and black pepper" },
      { amount: "optional",     name: "chives, to garnish" }
    ],
    phases: [
      { heading: "Make the Dough", steps: [
        "Preheat the oven (or pizza oven) to its maximum temperature.",
        "In a large bowl, mix the flour and salt. Add the olive oil and very warm water and stir until roughly combined.",
        "Knead by hand for a couple of minutes until soft and smooth. Wrap in cling film and rest at room temperature for 20–30 minutes."
      ]},
      { heading: "Prepare the Toppings", steps: [
        "Slice the onion thinly and sprinkle with a pinch of salt — this softens them so they don't burn in the hot oven.",
        "Slice the mushrooms thinly. If they release a lot of water, pat them dry.",
        "Season the crème fraîche with salt and pepper and stir."
      ]},
      { heading: "Assemble and Bake", steps: [
        "Roll the dough out very thinly into an oval or rectangle — as thin as you can get it. Place on a lightly oiled baking sheet or a floured peel if using a pizza stone.",
        "Spread the crème fraîche over the dough, leaving a small border. Top with the mushrooms and onion slices.",
        "Bake for 10–12 minutes until golden and crispy at the edges. In a pizza oven it will cook much faster — keep a close eye on it.",
        "Scatter with chives if using. Cut into squares and serve immediately."
      ]}
    ],
    notes: "The key is rolling the dough as thin as possible — thick dough stays soft and won't crisp up. Don't overload the toppings or it will go soggy. If your mushrooms are very wet, sauté them briefly first to drive off the moisture before topping."
  },{
    section: "doughs",
    title: "Gluten-Free Pizza Dough",
    description: "A cold-fermented GF dough made with Caputo Fioreglut flour. Light, airy and achieves real leopard spotting in the pizza oven — no one misses out on pizza night.",
    category: "Pizza Dough",
    time: "2 days",
    serves: "2 balls (300g each, 12\" pizza)",
    image: "images/gluten_free.jpeg",
    ingredients: [
      { amount: "320g",      name: "Caputo Fioreglut gluten-free flour" },
      { amount: "2g",        name: "instant yeast" },
      { amount: "256g",      name: "water, at room temperature" },
      { amount: "10g",       name: "salt" },
      { amount: "16g",       name: "extra-virgin olive oil" },
      { amount: "as needed", name: "fine cornmeal, for dusting" }
    ],
    phases: [
      { heading: "Mix the Dough", steps: [
        "Dissolve the yeast in the water in a large mixing bowl.",
        "Add the flour, salt, and olive oil. Mix by hand or with a mixer for 2 minutes until well combined."
      ]},
      { heading: "Bulk Ferment", steps: [
        "Cover the bowl and leave the dough to rise at room temperature until doubled in size."
      ]},
      { heading: "Cold Ferment", steps: [
        "Transfer the dough to the fridge. You can use it from this point onward, but for deeper flavour leave it for 1–2 days."
      ]},
      { heading: "Rest Before Baking", steps: [
        "Use a spatula to gently release the dough from the container. Place on a surface or tray dusted generously with cornmeal.",
        "Cover with an upturned bowl and leave at room temperature for 2–4 hours."
      ]},
      { heading: "Stretch and Bake", steps: [
        "Preheat the pizza oven to 400°C / 750°F stone temperature on a high flame.",
        "Dust the dough generously with cornmeal. Press it out gradually from the centre, leaving a 1cm raised edge for the crust. Be gentle — without gluten the dough tears more easily than regular pizza dough.",
        "Remove any excess cornmeal from the peel before launching.",
        "Bake for 2–3 minutes, turning occasionally for an even bake. Serve hot."
      ]}
    ],
    notes: "Caputo Fioreglut is a wheat-starch based GF flour — it's not suitable for coeliac disease, but works well for gluten intolerance. The cornmeal dusting is essential here: it stops the dough sticking and helps it slide off the peel cleanly. Don't skip the 2–4 hour room temperature rest before baking or the dough will be too cold and dense."
  },{
    section: "beyond",
    title: "Tandoori Roti",
    description: "Restaurant-style butter roti made with whole wheat flour — crisp at the edges, soft and fluffy in the centre. Cooked on an inverted steel pan over a gas flame to mimic the tandoor.",
    category: "Flatbread",
    time: "~1 hour 15 mins",
    serves: "8 rotis",
    image: "images/roti.jpeg",
    ingredients: [
      { amount: "2¼ cups", name: "whole wheat flour (atta)" },
      { amount: "½ tsp",   name: "salt" },
      { amount: "¼ tsp",   name: "baking soda" },
      { amount: "½ cup",   name: "plain yogurt (fresh, not sour)" },
      { amount: "1 tbsp",  name: "neutral oil" },
      { amount: "½ cup",   name: "water (plus more as needed)" },
      { amount: "1 tbsp",  name: "butter, for brushing after cooking" }
    ],
    phases: [
      { heading: "Make the Dough", steps: [
        "Mix together the flour, salt, and baking soda in a large bowl. Make a well in the centre and add the yogurt, oil, and half the water.",
        "Mix into a soft dough, adding more water as needed. It should be soft but not sticky. Rub a few drops of oil over the surface, cover, and rest for 30 minutes.",
        "After resting, knead the dough well for about 3 minutes until smooth. Divide into 8 equal portions and roll into balls. Keep covered."
      ]},
      { heading: "Roll the Rotis", steps: [
        "Lightly dust the surface and a dough ball, then roll out to a 6-inch round. Keep it slightly thick — don't roll bigger than 6 inches or it will turn out thin and dry.",
        "Roll all the rotis and lay them out on a clean dry surface."
      ]},
      { heading: "Cook in the Pizza Oven", steps: [
        "Preheat the pizza oven to maximum temperature for at least 15–20 minutes, then turn it down to low before launching.",
        "Launch one or two rotis at a time towards the outer edge of the stone, away from the flame.",
        "They should puff quickly — turn them nearly continuously for even browning. The whole cook takes just 1–2 minutes.",
        "Once charred spots appear and the roti is puffed, remove with a peel, brush immediately with butter, and serve."
      ]}
    ],
    notes: "If your yogurt is very sour or you only have Greek yogurt, mix equal parts yogurt and milk. Stack cooked rotis under a clean towel to keep them soft, or leave them out to stay slightly crisp."
  },{
    section: "beyond",
    title: "Pita Pockets",
    description: "A wet, yeast-leavened dough baked at maximum heat — the steam trapped inside creates the pocket. Works in a home oven with a pizza stone or straight in a pizza oven.",
    category: "Flatbread",
    time: "~4 hours",
    serves: "8 pitas",
    image: "images/pita.jpeg",
    ingredients: [
      { amount: "344g (2¾ cups)", name: "unbleached all-purpose flour" },
      { amount: "35g (¼ cup)",   name: "whole wheat flour" },
      { amount: "2 tsp",         name: "instant yeast" },
      { amount: "1½ tsp",        name: "salt" },
      { amount: "1 tsp",         name: "sugar" },
      { amount: "1 cup",         name: "lukewarm water" },
      { amount: "2 tbsp",        name: "olive oil" }
    ],
    phases: [
      { heading: "Mix and Knead", steps: [
        "Combine both flours, yeast, salt, and sugar in a mixing bowl.",
        "Add the lukewarm water and olive oil. Mix until the dough comes together, then knead with a dough hook for about 7 minutes (or 10 minutes by hand) until smooth and elastic. The dough should be quite sticky — resist adding more flour.",
        "Shape into a boule, return to the bowl, cover with plastic wrap, and leave to rise in a warm place until doubled in size, about 1–2 hours."
      ]},
      { heading: "Shape and Second Rise", steps: [
        "Divide the dough into 8 equal pieces (about 85g each). Shape each into a tight ball.",
        "Place on a baking sheet, cover with plastic wrap or a clean towel, and let rise for 30–60 minutes while you heat the oven.",
        "On a lightly floured surface, roll each ball into a 6-inch round. Rest for 10 minutes before baking."
      ]},
      { heading: "Bake — Home Oven", steps: [
        "Place a pizza stone on the middle rack and preheat your oven to its maximum temperature for at least 30 minutes.",
        "Lay as many pita rounds as will fit directly on the stone. Bake for 3–5 minutes until fully puffed.",
        "Flip and cook the other side for another few minutes until lightly browned.",
        "Transfer to a bowl and cover with a clean towel to keep soft. Repeat with the remaining pita."
      ]},
      { heading: "Bake — pizza oven", steps: [
        "Preheat the pizza oven to maximum for 15–20 minutes, then turn down to low.",
        "Launch one or two pita towards the outer edge of the stone — they puff almost immediately.",
        "Turn nearly continuously for even browning, then peel out, flip, and relaunch. Cook the second side 1–2 minutes more.",
        "Rest in a covered bowl. Serve warm or at room temperature."
      ]}
    ],
    notes: "For more flavour, do the first rise overnight in the fridge — reduce yeast to 1 tsp. If the pocket doesn't form, the oven wasn't hot enough or the dough was too dry; the bread is still delicious as a wrap or for tearing and dipping."
  },
  {
    section: "doughs",
    title: "Double Fermentation 3-Day Dough",
    description: "A poolish-based dough fermented over three days for deep flavour and an open, airy crumb.",
    category: "Pizza Dough",
    time: "3 days",
    serves: "Several balls",
    image: "images/double_ferment.jpeg",
    ingredients: [
      { amount: "150ml", name: "water (for poolish)" },
      { amount: "150g",  name: "flour (for poolish)" },
      { amount: "1g",    name: "yeast, approx 1/3 tsp (for poolish)" },
      { amount: "3g",    name: "honey (for poolish)" },
      { amount: "200ml", name: "water (for dough)" },
      { amount: "350g",  name: "flour (for dough)" },
      { amount: "15g",   name: "salt" },
      { amount: "5g",    name: "olive oil" }
    ],
    phases: [
      { heading: "Day 1 Evening - Make the Poolish", steps: [
        "Mix 150ml water, 150g flour, 1g yeast, and 3g honey together in a bowl until combined.",
        "Leave at room temperature for 1 hour to activate the yeast, then cover and refrigerate for 16-24 hours."
      ]},
      { heading: "Day 2 Evening - Make the Pizza Dough", steps: [
        "Remove the poolish from the fridge and let it sit out for 30 minutes.",
        "Add 200ml of water, 350g of flour, 15g of salt, and 5g of olive oil to the poolish. Mix everything together.",
        "Knead for 8-10 minutes until smooth and elastic.",
        "Place in a covered bowl and refrigerate for another 16-24 hours."
      ]},
      { heading: "Day 3 Afternoon - Ball and Proof", steps: [
        "Take the dough out of the fridge and leave it for 1-2 hours to come up to temperature.",
        "Divide into dough balls. Let them rest at room temperature for 2-4 hours (typically 2 hours at 25C). Reball twice, once every hour.",
        "When the balls are puffy and relaxed, heat your oven to its maximum temperature and make pizza."
      ]}
    ],
    notes: null
  },
  {
    section: "doughs",
    title: "Leopard Pizza Dough",
    description: "A biga-and-poolish combo with a multi-day cold ferment designed for maximum flavour and leopard spotting in the oven.",
    category: "Pizza Dough",
    time: "4 days",
    serves: "Several balls (270g each)",
    image: "images/leoparding.jpeg",
    ingredients: [
      { amount: "292g",    name: "flour (for biga)" },
      { amount: "146g",    name: "water (for biga)" },
      { amount: "0.5g",    name: "yeast (for biga)" },
      { amount: "200g",    name: "flour (for poolish)" },
      { amount: "200g",    name: "water (for poolish)" },
      { amount: "0.4g",    name: "yeast (for poolish)" },
      { amount: "13.78g",  name: "salt" }
    ],
    phases: [
      { heading: "Day 1 Morning - Make Poolish and Biga", steps: [
        "Poolish: Combine 200g water, 200g flour, and 0.4g yeast. Mix until smooth, cover, and set aside.",
        "Biga: Combine 146g water, 292g flour, and 0.5g yeast. Mix until it just comes together (it will be stiff), cover, and set aside."
      ]},
      { heading: "Day 1 Evening - Refrigerate", steps: [
        "After 7 hours at room temperature, move both the poolish and biga into the fridge. Leave for 12-24 hours."
      ]},
      { heading: "Day 2 Evening - Mix the Final Dough", steps: [
        "Add the cold biga and poolish (straight from the fridge, around 50F / 10C) to a mixer.",
        "Add 13.78g of salt. Mix until the dough reaches 70F / 21C.",
        "Tightly shape into a ball and bulk ferment in the fridge overnight (24 hours)."
      ]},
      { heading: "Day 3 Evening - Ball", steps: [
        "Divide the dough into 270g balls. Place in the fridge for another 24 hours."
      ]},
      { heading: "Day 4 Evening - Final Proof and Bake", steps: [
        "Take the dough balls out of the fridge 2 hours before baking and let them come to room temperature.",
        "Shape the pizzas and bake at maximum oven temperature."
      ]}
    ],
    notes: null
  },
  {
    section: "doughs",
    title: "Manitoba Pizza Dough",
    description: "A 63-hour cold-fermented dough made with high-protein Manitoba flour. Stretches beautifully to a 10-inch base.",
    category: "Pizza Dough",
    time: "~3 days",
    serves: "Several balls (230g each)",
    image: "images/manitoba.jpeg",
    ingredients: [
      { amount: "1kg",       name: "Caputo Manitoba flour, plus extra for kneading" },
      { amount: "700g",      name: "water" },
      { amount: "26g",       name: "salt" },
      { amount: "2g",        name: "yeast" },
      { amount: "as needed", name: "semolina flour, for shaping and stretching" }
    ],
    phases: [
      { heading: "Evening Day 1 - Mix and Knead", steps: [
        "Add 700g of water to a mixing bowl. Add 2g of yeast and stir until every grain has dissolved.",
        "Gradually add the Manitoba flour to the water, mixing with a fork to remove lumps as you go.",
        "When the dough becomes too thick for a fork, tip it onto a floured surface. Scrape any dough left in the bowl and incorporate it.",
        "Knead for 10-15 minutes until all the flour is incorporated and the dough is smooth and elastic.",
        "Shape into a tight ball, cover with the upturned mixing bowl, and rest for 1 hour.",
        "After the hour, uncover and work in 26g of salt until fully absorbed.",
        "Return the dough to the bowl, cover, and rest for another 1 hour.",
        "Place in the fridge for 63 hours."
      ]},
      { heading: "Lunchtime Day 3 - Ball and Final Proof", steps: [
        "Remove the dough from the fridge and allow 2 hours for it to return to room temperature.",
        "Divide into 230g dough balls and place in a dough tray or individual containers.",
        "Let the balls rest for 4 hours.",
        "When ready, tip a dough ball onto a bed of semolina. Use your fingertips to press from the centre outward, then use the steering-wheel method to gently stretch to a 10-inch base. Top and bake."
      ]}
    ],
    notes: null
  },
  {
    section: "beyond",
    title: "No-Yeast Naan",
    description: "A soft, slightly chewy flatbread leavened with yogurt and baking powder. Ready in under 3 hours with no yeast required — cooked on a hot skillet or directly on the flame.",
    category: "Flatbread",
    time: "~3 hours",
    serves: "~8–9 naans",
    image: "images/naan.jpeg",
    ingredients: [
      { amount: "¼ cup",   name: "plain yogurt (or cashew/almond yogurt)" },
      { amount: "1 tsp",   name: "sugar" },
      { amount: "1 tsp",   name: "baking powder" },
      { amount: "1 pinch", name: "baking soda" },
      { amount: "2 cups",  name: "all-purpose flour" },
      { amount: "1 tsp",   name: "salt" },
      { amount: "2 tbsp",  name: "neutral oil (or butter)" },
      { amount: "½ cup",   name: "water" },
      { amount: "1 tbsp",  name: "nigella seeds (kalonji), sesame seeds, or melon seeds — optional" },
      { amount: "as needed", name: "butter or ghee, for brushing after cooking" }
    ],
    phases: [
      { heading: "Make the Dough", steps: [
        "In a mixing bowl, combine the yogurt, sugar, baking powder, and baking soda. Stir well until the sugar dissolves.",
        "Add the flour and salt, and mix with a spoon to distribute evenly.",
        "Make a well in the centre, add the oil, then pour in ½ cup of water.",
        "Mix, then knead to a smooth, soft, and pliable dough. If it feels dry, add a splash more water; if sticky, dust with a little flour.",
        "Lightly oil the surface of the dough, place it back in the bowl, and cover with a damp cloth and lid. Rest for 2 hours."
      ]},
      { heading: "Shape the Naans", steps: [
        "Divide the dough into 8–9 medium balls.",
        "Lightly flour your surface and rolling pin. Flatten a ball slightly, sprinkle with seeds if using, and roll into a 6–7 inch elongated oval.",
        "Taper one end by rolling it slightly thinner — this gives the classic tear-drop shape."
      ]},
      { heading: "Cook on the Stovetop", steps: [
        "Heat a heavy skillet or tawa over medium-high to high heat. Place the naan on the hot surface.",
        "Cook until air pockets begin to appear on the surface, then flip with tongs.",
        "Cook the second side more than the first — until more air pockets form and it develops some colour.",
        "For charred spots, hold the naan directly over a gas flame with tongs, rotating it and toasting the edges. Don't over-char or it will turn crispy.",
        "Place on a plate and brush immediately with butter or ghee. Serve hot."
      ]}
    ],
    notes: "Best eaten hot. If you don't have a gas flame, cook entirely on the skillet — press the edges with a spatula to make sure they cook through. The dough keeps in the fridge for 3–4 days. Using more yogurt in place of some or all of the water may give a better result — a richer dough with more flavour and a softer texture."
  },
  {
    section: "doughs",
    title: "3h Pizza Dough",
    description: "A same-day pizza dough ready in about 3 hours. Minimal yeast, a couple of folds, and a relaxed proof.",
    category: "Pizza Dough",
    time: "~3 hours",
    serves: "~3 balls (290g each)",
    image: "images/3hours.jpeg",
    ingredients: [
      { amount: "500g", name: "double zero (00) flour" },
      { amount: "375g", name: "water" },
      { amount: "12g",  name: "salt" },
      { amount: "2g",   name: "yeast" }
    ],
    phases: [
      { heading: "Mix Ingredients", steps: [
        "Add 2g of yeast to a mixing bowl.",
        "Pour in 375g of water and stir until the yeast fully dissolves.",
        "Add 500g of 00 flour and 12g of salt. Mix with a spoon, then use your hands to bring it together into a shaggy dough."
      ]},
      { heading: "Rest the Dough", steps: [
        "Place the dough in a container. Let it rest at room temperature for 30 minutes."
      ]},
      { heading: "Stretch and Fold", steps: [
        "After 30 minutes, stretch and fold the dough on all four sides, then shape it into a tighter ball. Let it rest for 1 hour at room temperature."
      ]},
      { heading: "Divide and Shape", steps: [
        "Divide the dough into portions of 290g each. Slap each piece on the counter a few times, then shape into a smooth, tight dough ball."
      ]},
      { heading: "Final Proof", steps: [
        "Let the dough balls rest at room temperature for 1.5 hours until roughly doubled in size. Now ready to stretch and top."
      ]}
    ],
    notes: "Slap the dough balls on the counter a few times when forming them. Best to extend the total time to 4-4.5 hours and do some reballing for better structure."
  },
  {
    section: "doughs",
    title: "New York Style Pizza Dough",
    description: "A poolish-based dough with olive oil for a crispy, well-browned crust. Cold-fermented for up to 48 hours — foldable, flavourful, and built to hold a proper New York slice.",
    category: "Pizza Dough",
    time: "1–2 days",
    serves: "860g total dough",
    image: "images/ny_style.jpeg",
    ingredients: [
      { amount: "1g",   name: "active dry yeast (poolish)" },
      { amount: "150g", name: "water (poolish)" },
      { amount: "150g", name: "bread flour (poolish)" },
      { amount: "190g", name: "water (dough)" },
      { amount: "343g", name: "00 flour (dough)" },
      { amount: "13g",  name: "salt" },
      { amount: "20g",  name: "olive oil" }
    ],
    phases: [
      { heading: "Make the Poolish", steps: [
        "Combine 150g water, 150g bread flour, and 1g active dry yeast. Mix until smooth.",
        "Ferment at room temperature for 7–12 hours."
      ]},
      { heading: "Mix the Dough", steps: [
        "Add the poolish and all remaining ingredients (water, 00 flour, salt, olive oil) to a mixer.",
        "Mix until smooth. The dough should reach 75–78°F / 24–26°C."
      ]},
      { heading: "Bulk Ferment", steps: [
        "Transfer to a sealed container and bulk ferment at room temperature for 1 hour."
      ]},
      { heading: "Divide and Shape", steps: [
        "Divide the dough and tightly shape into balls of your desired size.",
        "Proof the dough balls at room temperature for 1 hour."
      ]},
      { heading: "Cold Ferment", steps: [
        "Place in the fridge for 24–48 hours. OR allow the dough to double in size at room temperature for another 30–60 minutes and bake the same day.",
        "If refrigerating, remove the dough at least 30–60 minutes before baking to take the chill off."
      ]}
    ],
    notes: "Oil is key for NY-style — it conducts heat and promotes browning for a crispier crust. Use whole milk low-moisture mozzarella, grated by hand. For the sauce, use a crushed tomato that isn't too watery so the cheese and sauce come together rather than turning soupy."
  },
  {
    section: "beyond",
    title: "Spinach & Feta Gözleme",
    description: "Turkey's answer to a toastie. A yogurt-based dough rolled paper-thin, filled with spinach and feta, folded into a parcel and cooked in the pizza oven — done in under 5 minutes, beautifully blistered.",
    category: "Flatbread",
    time: "~1 hour 15 mins",
    serves: "~4 gözleme",
    image: "images/gozleme.jpeg",
    ingredients: [
      { amount: "300g",   name: "plain flour" },
      { amount: "40g",    name: "olive oil" },
      { amount: "50g",    name: "plain yogurt" },
      { amount: "125ml",  name: "warm water" },
      { amount: "1 tsp",  name: "salt" },
      { amount: "40g per gözleme", name: "feta cheese" },
      { amount: "40g per gözleme", name: "baby spinach, roughly chopped" },
      { amount: "to taste", name: "black pepper" },
      { amount: "to finish", name: "olive oil, for brushing" }
    ],
    phases: [
      { heading: "Make the Dough", steps: [
        "Mix together the warm water, olive oil, and yogurt in a jug.",
        "Place the flour and salt in a large bowl and make a well in the centre. Gradually pour in the wet mixture, mixing as you go, until a dough forms.",
        "Transfer to a work surface and knead for about 4 minutes until super smooth.",
        "Place back in the bowl, cover with clingfilm, and rest for 30 minutes to an hour."
      ]},
      { heading: "Fill and Fold", steps: [
        "Divide the dough into 70g portions. On a well-floured surface, roll each one out as thin as possible into a rough rectangle.",
        "In a bowl, combine the chopped spinach and crumbled feta. Season with black pepper.",
        "Place the filling in the centre of the dough and fold in the four sides to seal it into a neat rectangular parcel.",
        "Lightly roll over the parcel with a rolling pin to seal it shut and even out the thickness."
      ]},
      { heading: "Cook in the Pizza Oven", steps: [
        "Place the gözleme on a lightly floured peel horizontally. Launch into the front third of the oven — too far back and it will burn before it's cooked through.",
        "Cook for about 1 minute, then rotate 180° and cook for another minute.",
        "Flip the parcel over, then relaunch vertically (shorter sides facing the flame and the oven mouth). Cook for 30 seconds, rotate 180°, and cook a final 30 seconds.",
        "Brush generously with olive oil, slice in half, and serve immediately."
      ]}
    ],
    notes: "The dough must be kneaded until completely smooth — this is what makes it rollable and pliable. Keep the gözleme in the front third of the oven to avoid burning. The olive oil brush at the end is not optional."
  },
  {
    section: "toppings",
    title: "Olives",
    image: "images/olives.jpeg",
    ingredients: [
      { amount: "handful",  name: "Castelvetrano olives, pitted and lightly crushed" },
      { amount: "handful",  name: "Kalamata olives, pitted and halved" },
      { amount: "1 tbsp",   name: "capers, rinsed" },
      { amount: "to taste", name: "dried oregano" },
      { amount: "to taste", name: "chilli flakes" },
      { amount: "to taste", name: "extra-virgin olive oil" },
      { amount: "optional", name: "fior di latte or grated Pecorino" },
      { amount: "optional", name: "anchovies, for a puttanesca twist" }
    ],
    phases: null,
    notes: null
  },
  {
    section: "toppings",
    title: "Pumpkin, Ricotta & Pomegranate",
    image: "images/pumpkin.jpeg",
    ingredients: [
      { amount: "200g",     name: "pumpkin or butternut squash, thinly sliced or roasted" },
      { amount: "1 tbsp",   name: "extra-virgin olive oil" },
      { amount: "pinch",    name: "chilli flakes" },
      { amount: "pinch",    name: "ground cinnamon or nutmeg" },
      { amount: "3–4 tbsp", name: "ricotta, dolloped" },
      { amount: "handful",  name: "pomegranate seeds" },
      { amount: "handful",  name: "fresh sage leaves" },
      { amount: "to taste", name: "flaky sea salt and black pepper" },
      { amount: "optional", name: "drizzle of honey or balsamic glaze, to finish" }
    ],
    phases: null,
    notes: null
  },
  {
    section: "toppings",
    title: "Burrata with Rocket",
    image: "images/burrata.jpeg",
    ingredients: [
      { amount: "1 ball",   name: "burrata" },
      { amount: "handful",  name: "rocket (arugula)" },
      { amount: "to taste", name: "extra-virgin olive oil" },
      { amount: "to taste", name: "flaky sea salt and black pepper" },
      { amount: "optional", name: "lemon zest or a few drops of lemon juice" }
    ],
    phases: null,
    notes: null
  },
  {
    section: "toppings",
    title: "Mushroom",
    image: "images/mushrooms.jpeg",
    ingredients: [
      { amount: "150g",     name: "mushrooms (chestnut or mixed), thinly sliced" },
      { amount: "2 cloves", name: "garlic, thinly sliced" },
      { amount: "2 tbsp",   name: "extra-virgin olive oil" },
      { amount: "to taste", name: "salt and black pepper" },
      { amount: "optional", name: "fresh thyme or rosemary" },
      { amount: "optional", name: "grated Parmigiano or Pecorino, to finish" }
    ],
    phases: null,
    notes: null
  },
  {
    section: "toppings",
    title: "Aubergine",
    image: "images/aubergine.jpeg",
    ingredients: [
      { amount: "1 medium",  name: "aubergine, thinly sliced or diced" },
      { amount: "2 tbsp",    name: "extra-virgin olive oil" },
      { amount: "1 clove",   name: "garlic, minced" },
      { amount: "to taste",  name: "salt and black pepper" },
      { amount: "optional",  name: "tomato passata as a base" },
      { amount: "optional",  name: "fior di latte or smoked scamorza" },
      { amount: "optional",  name: "fresh basil, to finish" }
    ],
    phases: null,
    notes: null
  },
  {
    section: "toppings",
    title: "Marinara",
    image: "images/marinara.jpeg",
    ingredients: [
      { amount: "4 tbsp",   name: "tomato passata or crushed San Marzano tomatoes" },
      { amount: "2 cloves", name: "garlic, thinly sliced" },
      { amount: "1 tbsp",   name: "extra-virgin olive oil" },
      { amount: "to taste", name: "dried oregano" },
      { amount: "to taste", name: "flaky sea salt" },
      { amount: "optional", name: "fresh basil" }
    ],
    phases: null,
    notes: null
  }
];

var grids = {
  doughs:   document.getElementById('grid-doughs'),
  toppings: document.getElementById('grid-toppings'),
  beyond:   document.getElementById('grid-beyond')
};
var overlay = document.getElementById('overlay');
var closeBtn = document.getElementById('closeBtn');

function openModal(i) {
  var r = recipes[i];
  var modalImg = document.getElementById('modalImg');
  if (r.image) {
    modalImg.src = r.image;
    modalImg.alt = r.title;
    modalImg.style.display = '';
  } else {
    modalImg.src = '';
    modalImg.style.display = 'none';
  }
  document.getElementById('modalTitle').textContent = r.title;
  document.getElementById('modalDesc').textContent = r.description || '';
  document.getElementById('modalDesc').style.display = r.description ? '' : 'none';
  var metaHTML = '';
  if (r.category) metaHTML += '<span>' + r.category + '</span>';
  if (r.time)     metaHTML += '<span>' + r.time + '</span>';
  if (r.serves)   metaHTML += '<span>' + r.serves + '</span>';
  document.getElementById('modalMeta').innerHTML = metaHTML;

  var ingHTML = '';
  for (var j = 0; j < r.ingredients.length; j++) {
    ingHTML += '<div class="ingredient-item"><span class="ingredient-amount">' +
      r.ingredients[j].amount + '</span><span>' + r.ingredients[j].name + '</span></div>';
  }
  document.getElementById('modalIngredients').innerHTML = ingHTML;

  var phasesHTML = '';
  if (r.phases && r.phases.length) {
    for (var p = 0; p < r.phases.length; p++) {
      var ph = r.phases[p];
      phasesHTML += '<div class="phase"><p class="phase-heading">' + ph.heading + '</p>';
      for (var s = 0; s < ph.steps.length; s++) {
        phasesHTML += '<div class="step"><span class="step-num">' + (s + 1) +
          '</span><p class="step-text">' + ph.steps[s] + '</p></div>';
      }
      phasesHTML += '</div>';
    }
  }
  var methodSection = document.getElementById('modalSteps').parentElement;
  methodSection.style.display = phasesHTML ? '' : 'none';
  document.getElementById('modalSteps').innerHTML = phasesHTML;

  document.getElementById('modalNotes').innerHTML = r.notes
    ? '<div class="notes-block"><p class="section-label">Notes</p><p class="notes-text">' + r.notes + '</p></div>'
    : '';

  overlay.classList.add('active');
  document.body.style.overflow = 'hidden';
  overlay.scrollTop = 0;
}

function closeModal() {
  overlay.classList.remove('active');
  document.body.style.overflow = '';
}

for (var k = 0; k < recipes.length; k++) {
  (function(idx) {
    var r = recipes[idx];
    var card = document.createElement('article');
    card.className = 'card';
    card.tabIndex = 0;
    card.setAttribute('role', 'button');
    var metaParts = [];
    if (r.category) metaParts.push('<span>' + r.category + '</span>');
    if (r.time)     metaParts.push('<span>' + r.time + '</span>');
    if (r.serves)   metaParts.push('<span>' + r.serves + '</span>');
    card.innerHTML =
      (r.image ? '<div class="card-img-wrap"><img src="' + r.image + '" alt="' + r.title + '" loading="lazy"></div>' : '') +
      '<div class="card-body">' +
        '<div class="card-meta">' + metaParts.join('') + '</div>' +
        '<h2 class="card-title">' + r.title + '</h2>' +
        (r.description ? '<p class="card-desc">' + r.description + '</p>' : '') +
      '</div>';
    card.addEventListener('click', function() { openModal(idx); });
    card.addEventListener('keydown', function(e) { if (e.key === 'Enter' || e.key === ' ') openModal(idx); });
    var targetGrid = grids[r.section] || grids.doughs;
    targetGrid.appendChild(card);
  })(k);
}

// Count labels
var sectionCounts = { doughs: 0, toppings: 0, beyond: 0 };
for (var m = 0; m < recipes.length; m++) {
  if (sectionCounts[recipes[m].section] !== undefined) sectionCounts[recipes[m].section]++;
}
document.getElementById('doughs-count').textContent =
  sectionCounts.doughs + ' recipe' + (sectionCounts.doughs !== 1 ? 's' : '');

// Empty state placeholders for sections with no recipes
function addEmptyCard(grid, label) {
  var empty = document.createElement('article');
  empty.className = 'card card-empty';
  empty.innerHTML = '<div class="card-empty-text"><p>' + label + '</p><span>Coming soon</span></div>';
  grid.appendChild(empty);
}

if (sectionCounts.toppings === 0) {
  document.getElementById('toppings-count').textContent = 'Coming soon';
  addEmptyCard(grids.toppings, 'Recipes on their way');
} else {
  document.getElementById('toppings-count').textContent =
    sectionCounts.toppings + ' recipe' + (sectionCounts.toppings !== 1 ? 's' : '');
}

if (sectionCounts.beyond === 0) {
  document.getElementById('grid-beyond-count').textContent = 'Coming soon';
  addEmptyCard(grids.beyond, 'Recipes on their way');
} else {
  document.getElementById('grid-beyond-count').textContent =
    sectionCounts.beyond + ' recipe' + (sectionCounts.beyond !== 1 ? 's' : '');
}

closeBtn.addEventListener('click', closeModal);
overlay.addEventListener('click', function(e) { if (e.target === overlay) closeModal(); });
document.addEventListener('keydown', function(e) { if (e.key === 'Escape') closeModal(); });
</script>
</body>
</html>
